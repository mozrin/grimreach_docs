TITLE: Grimreach Workspace – Phase 031: Deterministic Lunar Cycles + Moon-Phase Modifiers

INTENT
Introduce deterministic lunar cycles that affect global and zone-level systems.
This phase adds:
- global lunar phases
- deterministic moon-phase transitions
- moon-phase modifiers
- server-side lunar evaluation
- world updates reflecting lunar state
- client acknowledgement of lunar changes
- census tracking of lunar–seasonal interactions

No AI.  
No combat.  
No diplomacy.  
No rendering.  
Only deterministic lunar propagation.

============================================================
SECTION 1 — Define Lunar Phase Rules
============================================================

1. Introduce a minimal lunar rule structure that defines:
   - a global lunar phase
   - deterministic transitions between phases
   - no randomness

2. Lunar phases may include:
   - new_moon
   - waxing
   - full_moon
   - waning

3. Lunar rules must:
   - be static
   - be deterministic
   - not involve AI or decision-making

============================================================
SECTION 2 — Implement Lunar Cycles
============================================================

1. Integrate lunar updates into the server tick loop.
2. On each tick:
   - update the global lunar phase deterministically
   - apply simple cycle logic (e.g., new → waxing → full → waning → new)

3. Lunar cycles must:
   - not modify entity or player behavior directly
   - not introduce randomness
   - not trigger territory changes

============================================================
SECTION 3 — Apply Lunar Modifiers
============================================================

1. Introduce minimal lunar modifiers that affect:
   - spawn rates (e.g., full_moon increases spawns)
   - influence gain (e.g., new_moon reduces influence)
   - migration pressure (e.g., waxing increases outward flow)
   - environmental intensity (e.g., full_moon amplifies hazards)

2. Modifiers must:
   - be deterministic
   - be clamped
   - not override existing systems entirely

3. Lunar modifiers must:
   - not introduce new entity types
   - not introduce physics or interactions

============================================================
SECTION 4 — Include Lunar Summaries in WorldState
============================================================

1. Extend the WorldState broadcast to include:
   - current lunar phase
   - optional “lunar modifier active” flags

2. Lunar summaries must:
   - remain lightweight
   - not introduce complex serialization

============================================================
SECTION 5 — grimreach_client: Acknowledge Lunar Changes
============================================================

1. When receiving a WorldState message:
   - read lunar summaries
   - detect lunar phase transitions
   - print simple information (e.g., “Lunar phase: full moon”)

2. Do not render lunar effects.
3. Do not store lunar data beyond printing summary information.

============================================================
SECTION 6 — grimreach_census: Track Lunar–Seasonal Interactions
============================================================

1. When receiving a WorldState message:
   - read lunar summaries
   - correlate lunar phases with seasons, hazards, influence, and pressure
   - print aggregated information (e.g., “Full moon amplifying storm hazards”)

2. No storage, indexing, or analytics logic is required.

============================================================
SECTION 7 — No Other Files Modified
============================================================

- Do not modify Flame components.
- Do not modify UI files.
- Do not introduce AI, combat, or rendering.
- Do not introduce diplomacy or interactions.

============================================================
COMPLETION CRITERIA
============================================================

- Server defines deterministic lunar rules.
- Lunar phases update every tick.
- Lunar modifiers affect global systems deterministically.
- WorldState includes lunar summaries.
- grimreach_client prints lunar change information.
- grimreach_census prints lunar–seasonal cycle summaries.
- All projects compile and run with no errors.
- No gameplay logic exists.
- No rendering or input is introduced.
- The entire workspace runs cleanly with lunar-driven systemic behavior.

